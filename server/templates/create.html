{% extends 'base.html' %}

{% block title %}
    add data 
{% endblock %}

{% block content %}
<h1>Create a New Post</h1>

<form method="post">
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="study_id">Study ID</label>
        <input type="text" name="study_id"
              placeholder="Welche Studie?"
              class="form-control"
              value="{{ request.form['study_id'] }}"></input>
      </div>
      <div class="form-group col-md-4">
        <label for="type">Document-Type :</label>
        <select name="type" class="form-control">
          {% for type in source_type %}
          <option value="{{ type }}" SELECTED>{{ type }}</option>
      
          {% endfor %}
        </select> 
      </div>

      <div class="form-group col-md-2">
        <label for="scr_no">Scr No</label>
        <input type="text" name="scr_no"
              placeholder="Welcher Proband?" 
              value="{{ request.form['scr_no'] }}"></input>
      </div>
    </div>

    <div class="field">
      <label class="checkbox">
          <input type="checkbox">
          Save configuration 
      </label>
    </div>

    <br>  

    <table data-ticket-table class="table">
      <thead class="thead-light">
        <tr>
          <th scope="col">Visit</th>
          <th scope="col">Page</th>
          <th scope="col">Procedure</th>
          <th scope="col">Description</th>
          <th scope="col">Responsible</th>

        </tr>
      </thead>
      <tbody>
        <!-- ein attribut, den es nur fÃ¼r uns gibt 'data-ticket-row' -->
        <tr data-ticket-row>
          <td>
            <div class="form-group">
              <input type="text" name="row[][visit]"
                      placeholder="which visit?" class="form-control"
                      value="{{ request.form['visit'] }}"></input>
            </div>
          </td>
          
          <td>
            <div class="form-group">
              <input type="text" name="row[][page]"
                      placeholder="which page?" class="form-control"
                      value="{{ request.form['page'] }}"></input>
            </div>
          </td>
          <td>
            <div class="form-group">
              <input type="text" name="row[][title]"
                     placeholder="Post title" class="form-control"
                     value="{{ request.form['title'] }}"></input>
            </div>
          </td>
          <td>
            <div class="form-group">
              <textarea name="row[][description]" placeholder="Please describe your finding"
                        class="form-control" required>{{ request.form['description'] }}</textarea>
             </div>

          </td>
          <td>    
            <div class="form-group">
            <select name="row[][name]" width="300px">
              {% for user in Users %}
              <option value="{{ user.abbrev }}" SELECTED>{{ user.abbrev }}</option>
          
              {% endfor %}
            </select> 
        </div>
      </td>
      </tr>
    </tbody>

    </table>
  <div class="form-group">
    <button type="submit" class="btn btn-primary">Submit</button>
    <button type="button" class="btn btn-primary" id="add_row">add row</button>
    <script>
      document.getElementById("add_row").onclick = function(){
        let ticket_row = document.querySelector("tr[data-ticket-row]");
        let ticket_row_clone = ticket_row.cloneNode(true);
        let ticket_table = document.querySelector("table[data-ticket-table] tbody");
        ticket_table.appendChild(ticket_row_clone);
        console.log("add new row");

      }
      
    </script>
  </div>
</form>

{% endblock %}