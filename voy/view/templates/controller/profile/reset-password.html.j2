{% extends 'layout-prompt.html.j2' %}


{% from "components/new-password-field.html.j2" import render_new_password_field %}
{% from "components/password-field.html.j2" import render_password_field %}

{% from "utilities/_errors.html.j2" import render_errors %}


{#############################################################################}
{# META                                                                      #}
{#############################################################################}

{% block title %}Password Reset{% endblock %}


{#############################################################################}
{# CONTENT                                                                   #}
{#############################################################################}

{% block content %}

  <h1 class="title">
    Password Reset
  </h1>

  <form action="{{ url_for('profile_controller.reset_password_post') }}" method="POST">

    {{ render_errors(errors) }}

    <div class="field mb-5">
      <label class="label">
        Your Abbreviation
      </label>
      <div class="control">
        <input type="text" class="login-prompt__input--abbreviation input is-medium is-uppercase" name="user_abbreviation" placeholder="XMP" autofocus required />
      </div>
    </div>

    <div class="field mb-5">
      <label class="label">
        Your system Password
      </label>
      <div class="control">
        <input type="password" class="input is-medium" name="password_old" required />
      </div>
    </div>

    {{ render_new_password_field('Your new Password', 'password_new', {
      'classes': 'mb-5',
      'input_classes': 'is-medium',
      'conditions_classes': 'is-flex-direction-column'
    }) }}

    {{ render_password_field('Your new Password, again', 'password_new_repetition', {
      'classes': 'mb-5',
      'input_classes': 'is-medium',
    }) }}

    <div class="field is-grouped is-grouped-right mb-5">
      <div class="control">
        <button class="button is-primary is-medium">Reset Password</button>
      </div>
    </div>

  </form>

{% endblock %}


{#############################################################################}
{# MACROS                                                                    #}
{#############################################################################}
